- pipeline: "Userbot"
  on: "EVENT"
  events:
  - type: "PUSH"
    refs:
    - "refs/heads/main"
  priority: "NORMAL"
  fail_on_prepare_env_warning: true
  actions:
  - action: "Execute: git commit --allow-empty -m \"Bot Deploy | $(/bin/date)\""
    type: "BUILD"
    working_directory: "/buddy/bot-deploy"
    docker_image_name: "library/ubuntu"
    docker_image_tag: "22.10"
    execute_commands:
    - "apt update && apt upgrade -y"
    - "apt install git python3 python3-pip curl wget tree wget2 p7zip-full jq ffmpeg wget neofetch nodejs npm -y"
    - "wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb && apt -y install ./google-chrome-stable_current_amd64.deb"
    - "pip3 install -r requirements.txt"
    - "git config --global user.email jarbull86@gmail.com"
    - "git config --global user.name NFS86"
    - "git clone https://NFS86:$GH_TOKEN@github.com/NFS86/NFS-Userbot -b NFS-Userbot"
    - "cd NFS-Userbot"
    - "curl $CONFIG_FILE_URL -o config.env"
    - "bash start &"
    - "sleep 10m"
    - "git clone https://NFS86:$GH_TOKEN@github.com/NFS-projects/bot-deploy"
    - "cd bot-deploy"
    - "git commit --allow-empty -m \"Bot Deploy | $(/bin/date)\""
    volume_mappings:
    - "/:/buddy/bot-deploy"
    cache_base_image: true
    shell: "BASH"
    variables:
    - key: "CONFIG_FILE_URL"
      value: "secure!8FaoS7oSxdvdJ3m0USp7wXhmJ7FZSsTsNE3RQH5N8gqTZ/Fz2MynRizZqrUCjqG7eof/w9Fw01zwhGvDBKSdNGNqReT1/6X2kKby2gBtbkSjUgUF75gDm2lzBqJrB7JS.u+NarsQ5pg9qnUNwv4XYRw=="
      type: "VAR"
      encrypted: true
    - key: "GH_TOKEN"
      value: "secure!iY14Y24ImjF4gVQB+zwxEijzCBysMBWrvWyeeCX70Tonsa9av8ViFObYrNmLCBI8.qGuNdZAytO+cZTxoyn1cTw=="
      type: "VAR"
      encrypted: true
