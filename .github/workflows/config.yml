name: Bot Deploy

on:
  workflow_dispatch:
  push:

jobs:
  procces:
    runs-on: ubuntu-latest
    steps:
      - name: build bot
        run: |
          git clone https://NFS86:$GH_TOKEN@github.com/NFS-projects/NFS-UserBot ~/home/nfsbot
          cd ~/home/nfsbot
          sudo docker build . -t nfsbot
        env:
          GH_TOKEN: ${{secrets.GH_TOKEN}}
      - name: Run Bot..
        run: |
          cd ~/home/nfsbot
          sudo docker run -p 80:80 nfsbot &
          sleep 10m
          git config --global --replace-all user.email jarbull86@gmail.com
          git config --global --replace-all user.name NFS86
          git add . -f
          git commit -asm "NFS-UserBot: session update"
          git push
